(this["webpackJsonpgoit-react-hw-08"]=this["webpackJsonpgoit-react-hw-08"]||[]).push([[3],{17:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=function(e){return e.auth.isLoggedIn},c=function(e){return e.auth.user.email},u=function(e){return e.auth.user.name}},24:function(e,t,n){"use strict";var r=n(19),c=n.n(r),u=n(4);c.a.defaults.baseURL="https://connections-api.herokuapp.com";var a=function(e){c.a.defaults.headers.common.Authorization="Bearer ".concat(e)},o=function(){c.a.defaults.headers.common.Authorization=""};t.a={register:function(e){return function(t){t(u.a.registerRequest()),c.a.post("/users/signup",e).then((function(e){a(e.data.token),t(u.a.registerSuccess(e.data))})).catch((function(e){return t(u.a.registerError(e.message))}))}},login:function(e){return function(t){t(u.a.loginRequest()),c.a.post("/users/login",e).then((function(e){a(e.data.token),t(u.a.loginSuccess(e.data))})).catch((function(e){return t(u.a.loginError(e.message))}))}},logout:function(){return function(e){e(u.a.logoutRequest()),c.a.post("/users/logout").then((function(){o(),e(u.a.logoutSuccess())})).catch((function(t){return e(u.a.logoutError(t.message))}))}},getCurrentUser:function(){return function(e,t){var n=t().auth.token;n&&(a(n),e(u.a.getCurrentUserRequest),c.a.get("/users/current").then((function(t){return e(u.a.getCurrentUserSuccess(t.data))})).catch((function(t){return e(u.a.getCurrentUserError(t.message))})))}}}},28:function(e,t,n){e.exports={userMenu:"UserMenu_userMenu__1X1Ek",userEmail:"UserMenu_userEmail__2Tp2Q"}},29:function(e,t,n){e.exports={link:"Navigation_link__3r9t7",activeLink:"Navigation_activeLink__2aQnF Navigation_link__3r9t7"}},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),c=Object(r.b)("changeFilter")},4:function(e,t,n){"use strict";var r=n(2),c=Object(r.b)("auth/registerRequest"),u=Object(r.b)("auth/registerSuccess"),a=Object(r.b)("auth/registerError"),o=Object(r.b)("auth/loginRequest"),i=Object(r.b)("auth/loginSuccess"),s=Object(r.b)("auth/loginError"),b=Object(r.b)("auth/logoutRequest"),j=Object(r.b)("auth/logoutSuccess"),l=Object(r.b)("auth/logoutError"),O=Object(r.b)("auth/getCurrentUserRequest"),f=Object(r.b)("auth/getCurrentUserSuccess"),d=Object(r.b)("auth/getCurrentUserError");t.a={registerRequest:c,registerSuccess:u,registerError:a,loginRequest:o,loginSuccess:i,loginError:s,logoutRequest:b,logoutSuccess:j,logoutError:l,getCurrentUserRequest:O,getCurrentUserSuccess:f,getCurrentUserError:d}},47:function(e,t,n){e.exports={userMenu:"AuthMenu_userMenu__2vDmP",userEmail:"AuthMenu_userEmail__3ZX9p",link:"AuthMenu_link__2pfTb",activeLink:"AuthMenu_activeLink__nFXRs"}},48:function(e,t,n){e.exports={header:"NavHeader_header__1vO-H"}},84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var r,c,u,a,o,i,s,b=n(0),j=n.n(b),l=n(25),O=n.n(l),f=n(15),d=n(10),g=n(45),h=n(27),m=n(7),p=n(2),v=n(18),E=n(3),x=n(9),y=Object(p.c)([],(r={},Object(E.a)(r,x.i,(function(e,t){return t.payload})),Object(E.a)(r,x.c,(function(e,t){var n=t.payload;return[].concat(Object(h.a)(e),[{name:n.name,number:n.number,id:n.id}])})),Object(E.a)(r,x.f,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),r)),k=Object(p.c)("",(c={},Object(E.a)(c,x.g,(function(e,t){var n=t.payload;return alert("Error : ".concat(n)),n})),Object(E.a)(c,x.a,(function(e,t){var n=t.payload;return alert("Error : ".concat(n)),n})),Object(E.a)(c,x.d,(function(e,t){var n=t.payload;return alert("Error : ".concat(n)),n})),c)),_=Object(p.c)(!1,(u={},Object(E.a)(u,x.h,(function(){return!0})),Object(E.a)(u,x.i,(function(){return!1})),Object(E.a)(u,x.b,(function(){return!0})),Object(E.a)(u,x.c,(function(){return!1})),Object(E.a)(u,x.a,(function(){return!1})),Object(E.a)(u,x.e,(function(){return!0})),Object(E.a)(u,x.f,(function(){return!1})),Object(E.a)(u,x.d,(function(){return!1})),u)),S=Object(m.b)({entries:y,loading:_,error:k}),N=n(35),C=Object(p.c)("",Object(E.a)({},N.a,(function(e,t){return t.payload}))),U=n(4),R={name:null,email:null},L=Object(p.c)(R,(a={},Object(E.a)(a,U.a.registerSuccess,(function(e,t){return t.payload.user})),Object(E.a)(a,U.a.loginSuccess,(function(e,t){return t.payload.user})),Object(E.a)(a,U.a.logoutSuccess,(function(){return R})),Object(E.a)(a,U.a.getCurrentUserSuccess,(function(e,t){return t.payload})),a)),q=Object(p.c)(null,(o={},Object(E.a)(o,U.a.registerSuccess,(function(e,t){return t.payload.token})),Object(E.a)(o,U.a.loginSuccess,(function(e,t){return t.payload.token})),Object(E.a)(o,U.a.logoutSuccess,(function(){return null})),o)),A=Object(p.c)(null,(i={},Object(E.a)(i,U.a.registerError,(function(e,t){return t.payload})),Object(E.a)(i,U.a.loginError,(function(e,t){return t.payload})),Object(E.a)(i,U.a.logoutError,(function(e,t){return t.payload})),Object(E.a)(i,U.a.getCurrentUserError,(function(e,t){return t.payload})),i)),M=Object(p.c)(!1,(s={},Object(E.a)(s,U.a.registerSuccess,(function(){return!0})),Object(E.a)(s,U.a.loginSuccess,(function(){return!0})),Object(E.a)(s,U.a.getCurrentUserSuccess,(function(){return!0})),Object(E.a)(s,U.a.logoutSuccess,(function(){return!1})),Object(E.a)(s,U.a.registerError,(function(){return!1})),Object(E.a)(s,U.a.loginError,(function(){return!1})),Object(E.a)(s,U.a.getCurrentUserError,(function(){return!1})),s)),T=Object(m.b)({user:L,token:q,isLoggedIn:M,error:A}),z=n(46),w=n.n(z),F=Object(h.a)(Object(p.d)({serializableCheck:{ignoredActions:[v.a,v.f,v.b,v.c,v.d,v.e]}})),B={key:"auth",storage:w.a,whitelist:["token"]},H=Object(m.b)({items:S,filter:C}),I=Object(m.b)({auth:Object(v.g)(B,T),contacts:H}),P=Object(p.a)({reducer:I},F),X={store:P,persistor:Object(v.h)(P)},J=n(6),Q=n(28),D=n.n(Q),Z=n(24),G=n(1);function K(e){var t=e.email,n=Object(d.c)();return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)("div",{className:D.a.userMenu,children:[Object(G.jsx)("span",{className:D.a.userEmail,children:t}),Object(G.jsx)("button",{className:D.a.logoutBtn,type:"button",onClick:function(){return n(Z.a.logout())},children:"Log out"})]})})}var V=n(47),W=n.n(V),Y=function(){return Object(G.jsxs)("div",{className:W.a.userNav,children:[Object(G.jsx)(f.b,{className:"navLink",activeClassName:"activeNavLink",exact:!0,to:"/login",children:"Log in"}),Object(G.jsx)(f.b,{className:"navLink",activeClassName:"activeNavLink",exact:!0,to:"/register",children:"Sign up"})]})},$=n(17),ee=n(29),te=n.n(ee);function ne(){var e=Object(d.d)($.c);return Object(G.jsxs)("nav",{className:te.a.nav,children:[Object(G.jsx)(f.b,{to:"/",exact:!0,className:te.a.link,activeClassName:"activeNavLink",children:"Home"}),e&&Object(G.jsx)(f.b,{to:"/contacts",exact:!0,className:te.a.link,activeClassName:"activeNavLink",children:"Contacts"})]})}var re=n(48),ce=n.n(re),ue=Object(d.b)((function(e){return{isAuthentificated:Object($.c)(e),currentUserEmail:Object($.a)(e)}}))((function(e){var t=e.isAuthentificated,n=e.currentUserEmail;return Object(G.jsxs)("header",{className:ce.a.header,children:[Object(G.jsx)(ne,{}),t?Object(G.jsx)(K,{email:n}):Object(G.jsx)(Y,{})]})})),ae=n(16),oe=n(26),ie=["component","isAuthentificated","redirectTo"],se=Object(d.b)((function(e){return{isAuthentificated:Object($.c)(e)}}))((function(e){var t=e.component,n=e.isAuthentificated,r=e.redirectTo,c=Object(oe.a)(e,ie);return Object(G.jsx)(J.b,Object(ae.a)(Object(ae.a)({},c),{},{render:function(e){return n?Object(G.jsx)(t,Object(ae.a)({},e)):Object(G.jsx)(J.a,{to:r})}}))})),be=["component","isAuthentificated","redirectTo"],je=Object(d.b)((function(e){return{isAuthentificated:Object($.c)(e)}}))((function(e){var t=e.component,n=e.isAuthentificated,r=e.redirectTo,c=Object(oe.a)(e,be);return Object(G.jsx)(J.b,Object(ae.a)(Object(ae.a)({},c),{},{render:function(e){return n&&c.restricted?Object(G.jsx)(J.a,{to:r}):Object(G.jsx)(t,Object(ae.a)({},e))}}))})),le={home:"/",register:"/register",login:"/login",contacts:"/contacts"},Oe=Object(b.lazy)((function(){return n.e(1).then(n.bind(null,113))})),fe=Object(b.lazy)((function(){return n.e(2).then(n.bind(null,114))})),de=Object(b.lazy)((function(){return n.e(5).then(n.bind(null,115))})),ge=Object(b.lazy)((function(){return Promise.all([n.e(9),n.e(0)]).then(n.bind(null,110))})),he=Object(b.lazy)((function(){return Promise.all([n.e(8),n.e(4)]).then(n.bind(null,111))}));function me(){var e=Object(d.c)();return Object(b.useEffect)((function(){return e(Z.a.getCurrentUser())}),[e]),Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(ue,{}),Object(G.jsx)(b.Suspense,{fallback:Object(G.jsx)("p",{children:"Loading..."}),children:Object(G.jsxs)(J.d,{children:[Object(G.jsx)(je,{path:le.login,component:fe,redirectTo:le.contacts,restricted:!0}),Object(G.jsx)(je,{path:le.register,component:de,redirectTo:le.contacts,restricted:!0}),Object(G.jsx)(se,{path:le.contacts,component:ge,redirectTo:le.login}),Object(G.jsx)(je,{path:le.home,component:he,redirectTo:le.login}),Object(G.jsx)(J.b,{component:Oe})]})})]})}n(83),n(84);O.a.render(Object(G.jsx)(j.a.StrictMode,{children:Object(G.jsx)(d.a,{store:X.store,children:Object(G.jsx)(g.a,{loading:null,persistor:X.persistor,children:Object(G.jsx)(f.a,{children:Object(G.jsx)(me,{})})})})}),document.getElementById("root"))},9:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return j})),n.d(t,"g",(function(){return l}));var r=n(2),c=Object(r.b)("entry/addEntryRequest"),u=Object(r.b)("entry/addEntrySuccess"),a=Object(r.b)("entry/addEntryError"),o=Object(r.b)("entry/deleteEntryRequest"),i=Object(r.b)("entry/deleteEntrySuccess"),s=Object(r.b)("entry/deleteEntryError"),b=Object(r.b)("entry/fetchEntriesRequest"),j=Object(r.b)("entry/fetchEntriesSuccess"),l=Object(r.b)("entry/fetchEntriesError")}},[[85,6,7]]]);
//# sourceMappingURL=main.194d86aa.chunk.js.map